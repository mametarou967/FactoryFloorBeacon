# 要求仕様

## 背景・目的

工場管理部門の要望により、特定2フロア間の行き来の頻度を把握する。
約3ヶ月間の運用データをもとに、フロア間の往来実態を可視化する。

## 機能要件

### 必須
- [ ] 特定担当者のフロア出入りを自動記録する
- [ ] 記録データを各Raspberry Pi のローカルに保存する
- [ ] 3ヶ月後にデータを回収し、集計・HTMLレポートを自動生成する

### レポートの要件
- **フロア単位**: 2フロア間の往来総数・日別推移・時間帯別頻度・曜日別パターン
- **個人単位**: 個人ごとの往来回数ランキング・時間帯パターン

#### 出力形式（複数サポート）
| 形式 | 用途 | 優先度 |
|------|------|--------|
| HTML | メイン。インタラクティブなグラフをブラウザで閲覧 | 必須 |
| CSV  | 集計データの共有・二次利用 | 対応予定 |
| PNG  | グラフの画像出力。報告書等への貼り付け用 | 対応予定 |

- `python report.py` 1コマンドで全形式を一括出力すること

## 非機能要件

- 運用期間: 約3ヶ月
- ネットワーク: オフライン（工場内ローカル）
- 電池交換なしで3ヶ月以上持つビーコン設定にする

## 制約・前提条件

- ビーコン端末: SANWA SUPPLY MM-BLEBC8N（iBeacon / BLE 4.2）
- スキャナー: Raspberry Pi Zero 2 W H（小型・安価・BLE 4.2内蔵）
- 個人識別: iBeacon の UUID で担当者を識別
- 設定アプリ: SSS-825（Android専用）でビーコンを事前設定
- 対象フロア: 工場2階・3階
- 出入口数: 6箇所（2階: 3箇所、3階: 3箇所）
- 対象担当者: 約30名（増減あり）
- UUID↔担当者名のマッピングは `person_map.csv` で管理する（レポート生成時に参照）

## 要確認事項

- [x] 出入口6箇所の電源確保: 取れる見込み

## 未確定事項

- [x] データ保存先: 各Raspberry Pi のローカルに保存。3ヶ月後に手動で回収。
- [x] 集計・レポートの形式: HTMLレポートを自動生成。ブラウザで閲覧。
