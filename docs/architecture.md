# システム構成

## 機器構成

```
[担当者]
  └── MM-BLEBC8N（BLEビーコン）を携帯
        │ iBeacon advertising（UUID で個人識別）
        ▼
[Raspberry Pi × 6台]（各出入口に1台ずつ設置 / 2階: 3台、3階: 3台）
  └── BLEスキャン → 入退出イベントをローカルに記録
        │
        ▼
[各Pi のローカルストレージ]
  └── 3ヶ月分のデータを蓄積
        │  ※運用終了後に手動回収（PC持参 or USBメモリ）
        ▼
[集計・確認] Python + Plotly → report.html（ブラウザで閲覧）
```

## ビーコン仕様（MM-BLEBC8N）

| 項目 | 内容 |
|------|------|
| プロトコル | iBeacon（BLE 4.2） |
| 送信間隔 | 100ms〜10,000ms（設定可能） |
| 送信距離 | 最大約100m（出力レベル設定次第） |
| 電池 | CR2032 × 2個 |
| 電池寿命 | 数ヶ月〜約2年（設定次第） |
| 設定アプリ | SSS-825（Android専用） |

## 設計方針（検討中）

- Raspberry Pi での BLE スキャンには `bleak`（Python）を使用予定
- 入退出の判定ロジックは未検討（RSSI しきい値 / 滞在時間 等）
- レポート生成: Python + Plotly（インタラクティブHTMLグラフ）
- UUID↔担当者名のマッピングは `person_map.csv` で管理
  - 例: `uuid, name`
  - ビーコン設定時に作成し、レポート生成スクリプトが参照する

## 未確定事項

- [x] Raspberry Pi の台数: 出入口6箇所に1台ずつ、計6台（2階: 3台、3階: 3台）
- [x] 電源確保: 各出入口でコンセント取得の見込み
- [ ] 入退出判定のロジック
- [ ] データ保存フォーマット（SQLite / CSV 等）
