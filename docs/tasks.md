# タスク一覧

## ステータス凡例
- [ ] 未着手
- [~] 進行中
- [x] 完了

---

## フェーズ 0: 要件整理

- [x] ビーコン端末の選定（MM-BLEBC8N に決定）
- [x] 出入口の数・設置場所の確認（6箇所: 2階3箇所・3階3箇所）
- [x] 対象担当者の人数確認（約30名）
- [x] データ保存先・閲覧方法の決定（各Pi ローカル保存・手動回収）
- [x] 集計レポート形式の決定（Python + Plotly による HTML レポート）

## フェーズ 1: 環境構築・基本動作確認（開発機: Raspberry Pi 5）

> Raspberry Pi 5 × 1 + MM-BLEBC8N × 2 でBLEスキャンの基本動作を確認する

- [x] Git リポジトリ初期化
- [x] 出入口6箇所の電源確保を確認する（取れる見込み）
- [ ] BLE スキャンスクリプト作成
- [ ] iBeacon パケットのパース処理（UUID・RSSI抽出）
- [ ] RSSIピーク検出ロジックの実装（上昇→ピーク→下降で通過判定）
- [ ] 通過イベントのローカル保存処理（CSV形式: timestamp, scanner_id, uuid, rssi）
- [ ] Pi 5 + ビーコン2個で動作確認

## フェーズ 2: 実機確認（Raspberry Pi Zero 2 WH）

> Raspberry Pi Zero 2 WH × 2 + MM-BLEBC8N × 2 で出入り検知を確認する

- [ ] Zero 2 WH へのスキャナーソフトウェア導入
- [ ] ビーコンの UUID 割り当て・事前設定（SSS-825 アプリ使用）
- [ ] `person_map.csv` の作成（UUID と担当者名のマッピング）
- [ ] 2台構成でのフロア移動検知動作確認
- [ ] Pi 起動時にスキャナーが自動起動するよう systemd サービスとして設定する

## フェーズ 3: 集計・レポート

- [ ] 各Piからデータを回収・統合するスクリプト作成
- [ ] フロア移動推定ロジックの実装（同一UUIDの異フロア検知を突き合わせ）
- [ ] レポート生成スクリプト作成（`report.py`）
  - [ ] HTML出力（メイン）: Plotly によるインタラクティブグラフ
  - [ ] CSV出力: 集計データの表形式エクスポート
  - [ ] PNG出力: グラフの画像エクスポート（報告書貼り付け用）
  - [ ] コンテンツ: フロア単位（往来総数・日別推移・時間帯別頻度・曜日別パターン）
  - [ ] コンテンツ: 個人単位（往来回数ランキング・個人別時間帯パターン）

## フェーズ 4: 本番運用（Step 3: 実環境）

- [ ] Zero 2 WH 6台を各出入口に設置
- [ ] 工場での設置・動作テスト
- [ ] 本番運用開始（約3ヶ月）
- [ ] 3ヶ月後のデータ回収・最終レポート作成
